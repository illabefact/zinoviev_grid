# Задание 
	Реализовать программу подсчёта гистограммы слов для набора документов.
	Гистограмму следует выводить по убыванию частоты вхождений.
# Описание алгоритма
Входной документ читает построчно. Каждая строка сначала приводится к нижнему регистру, а затем разбивается на слова посредством стандартной SPL функции tokenize. Разделителем для разбиения являются пунктуационные и пробельные символы:  
list<rstring> substrings = tokenize(lineInLower, " \t\r\n\v\f.,!?;:\"&'", false);  
В приведенном выше первый аргумент – исходная строка, второй – разделитель, третий – флаг, говорящий, нужно ли выводить пустые подстроки.  
После разбиения подсчитывается количество вхождений каждого слова в строку. Для этого используется ассоциативный массив map<rstring, int32>, где ключом является слово, а значением – количество вхождений. Если слова значения по ключу нет, то такому ключу присваивается значение 1, в противоположенном случае – инкрементируется имеющееся значение.  
Статистики по отдельным строкам затем агрегируются в аналогичный ассоциативный массив.  
# Описание операторов
## DirectoryScan
Данный оператор сканирует директорию и отправлякт в выходной поток имена найденных файлов. Обязательный параметр directory подается, как параметр командной строки при запуске (directory: getSubmissionTimeValue("dir")). Параметр pattern задает маску для файлов. В нашем случае DirectoryScan будет искать только .txt файлы, т.к. pattern : ".*\\.txt$". Параметр initDelay задает время ожидания перед первым сканированием, параметр sleepTime – время ожидания между сканированиями. Параметры initDelay и sleepTime не являются обязательными. Их можно было бы и не указывать, и тогда применились бы значения по умолчанию.

## FileSource
Данный оператор читает файл и передает в выходной поток строки из этого файла. В конце файла (при достижении символа EndOfFile) отправляется пунктуационный символ Sys.WindowMarker, чтобы можно было разделять данные из разных файлов. В следующих операторах нам кроме содержимого файла понадобится еще и название файла. Можно настроить FileSource, чтобы выходные кортежи содержали название файла. Для этого необходимо объявить, что оператор возвращает кортеж размерности 2:  
     stream <rstring lineContents, rstring fileName> Data = FileSource(FilePath),  
а в параметрах оператора указать параметр output:  
     output Data: fileName = FileName().  
В этом случае в неуказанное поле кортежа поместятся строки, возвращаемые FileSource, а в поле fileName – название файла.
## OneLine Custom Operator
Данный оператор получает строки, считанные оператором FileSource, и считает количество вхождений для каждого слова. Затем пары «слово-количество вхождений» пересылаются следующему оператору.  
Пунктуационные символы также передаются в следующий оператор. Это необходимо делать явно, иначе пунктуационные символы просто потеряются.
## WholeFile Custom Operator
Данный оператор копит статистику по всему файлу в виде пар «слово-количество вхождений». Затем при получении пунктуационного символа, обозначающего конец файла, оператор передает накопленные данные следующему оператору и обнуляет внутреннее состояние.  
Для хранения данный используется ассоциативный массив mutable map<rstring, int32> res. SPL четко разграничивает изменяемые и неизменяемые переменные. Функции, изменяющие объект, можно использовать только с изменяемыми переменными. Тот факт, что res помечен, как mutable, дает нам возможность использовать функцию insertM (mutable map<K,V> values, K key, V value). Различие между функциями insert() и insertM() в том, что первая создает новую коллекцию, а вторая – изменяет уже существующую. Таким образом достигается экономия памяти. 
## Sort
Данный оператор сортирует кортежи внутри одного окна
## FileSink
Данный оператор записывает полученные статистические данные в файл. Так как требуется, чтобы для каждого входного файла генерировался отдельный файл со статистикой, в этот оператор необходимо передавать название исходного файла, чтобы использовать его для генерации названия выходного файла:  
     file: WholeFile.file + ".stat";  
Данным требованием продиктована вся остальная конфигурация оператора FileSource. В случае использования входных параметров в названии файла, единственный доступный тип закрытия – динамический (closeMode: dynamic;). Параметр append: false необходим для того, чтобы в случае перезапуска программы данные в уже сгенерированных файлах перетерлись. Параметр quoteStrings : false позволяет убрать кавычки вокруг значений, а следовательно файл будет легче обрабатывать потом. Параметр suppress позволяет не печатать некоторые элементы кортежа. Это позволяет не печатать название входного файла, которое является частью кортежа, но необходимо для генерации названия выходного файла.  
# Пример работы программы
## Входной файл:
The quick brown fox jumps over the lazy dog  
The quick brown fox jumps over the lazy dog  
The quick brown fox jumps over the lazy dog  
The quick brown  
The quick brown  
The quick brown  
A quick brown fox jumps over the lazy dog  
During the 20th century technicians tested typewriters   
and teleprinters with repeated lines of THE QUICK BROWN FOX sentence  
## Выходной файл:
the,12  
brown,8  
quick,8  
fox,5  
jumps,4  
over,4  
lazy,4  
dog,4  
a,1  
tested,1  
during,1  
technicians,1  
and,1  
repeated,1  
teleprinters,1  
with,1  
typewriters,1  
of,1  
sentence,1  
20th,1  
century,1  
lines,1